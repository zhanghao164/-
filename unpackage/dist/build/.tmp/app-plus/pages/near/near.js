(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/near/near"],{"21c9":function(t,e,o){"use strict";o.r(e);var a=o("9a79"),i=o("35e1");for(var s in i)"default"!==s&&function(t){o.d(e,t,function(){return i[t]})}(s);o("c90f");var n=o("2877"),r=Object(n["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=r.exports},"35e1":function(t,e,o){"use strict";o.r(e);var a=o("8b15"),i=o.n(a);for(var s in a)"default"!==s&&function(t){o.d(e,t,function(){return a[t]})}(s);e["default"]=i.a},"448b":function(t,e,o){"use strict";function a(t){this.key=t.key,this.requestConfig={key:t.key,s:"rsx",platform:"WXJS",appname:t.key,sdkversion:"1.2.0",logversion:"2.0"}}a.prototype.getWxLocation=function(t,e){wx.getLocation({type:"gcj02",success:function(t){var o=t.longitude+","+t.latitude;wx.setStorage({key:"userLocation",data:o}),e(o)},fail:function(o){wx.getStorage({key:"userLocation",success:function(t){t.data&&e(t.data)}}),t.fail({errCode:"0",errMsg:o.errMsg||""})}})},a.prototype.getRegeo=function(t){function e(e){var a=o.requestConfig;wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:o.key,location:e,extensions:"all",s:a.s,platform:a.platform,appname:o.key,sdkversion:a.sdkversion,logversion:a.logversion},method:"GET",header:{"content-type":"application/json"},success:function(o){var a,i,s,n,r,c,d,u,l;o.data.status&&"1"==o.data.status?(a=o.data.regeocode,i=a.addressComponent,s=[],n="",a&&a.roads[0]&&a.roads[0].name&&(n=a.roads[0].name+"附近"),r=e.split(",")[0],c=e.split(",")[1],a.pois&&a.pois[0]&&(n=a.pois[0].name+"附近",d=a.pois[0].location,d&&(r=parseFloat(d.split(",")[0]),c=parseFloat(d.split(",")[1]))),i.provice&&s.push(i.provice),i.city&&s.push(i.city),i.district&&s.push(i.district),i.streetNumber&&i.streetNumber.street&&i.streetNumber.number?(s.push(i.streetNumber.street),s.push(i.streetNumber.number)):(u="",a&&a.roads[0]&&a.roads[0].name&&(u=a.roads[0].name),s.push(u)),s=s.join(""),l=[{iconPath:t.iconPath,width:t.iconWidth,height:t.iconHeight,name:s,desc:n,longitude:r,latitude:c,id:0,regeocodeData:a}],t.success(l)):t.fail({errCode:o.data.infocode,errMsg:o.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var o=this;t.location?e(t.location):o.getWxLocation(t,function(t){e(t)})},a.prototype.getWeather=function(t){function e(e){var o="base";t.type&&"forecast"==t.type&&(o="all"),wx.request({url:"https://restapi.amap.com/v3/weather/weatherInfo",data:{key:a.key,city:e,extensions:o,s:i.s,platform:i.platform,appname:a.key,sdkversion:i.sdkversion,logversion:i.logversion},method:"GET",header:{"content-type":"application/json"},success:function(e){function o(t){var e={city:{text:"城市",data:t.city},weather:{text:"天气",data:t.weather},temperature:{text:"温度",data:t.temperature},winddirection:{text:"风向",data:t.winddirection+"风"},windpower:{text:"风力",data:t.windpower+"级"},humidity:{text:"湿度",data:t.humidity+"%"}};return e}var a,i;e.data.status&&"1"==e.data.status?e.data.lives?(a=e.data.lives,a&&a.length>0&&(a=a[0],i=o(a),i["liveData"]=a,t.success(i))):e.data.forecasts&&e.data.forecasts[0]&&t.success({forecast:e.data.forecasts[0]}):t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}function o(o){wx.request({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:a.key,location:o,extensions:"all",s:i.s,platform:i.platform,appname:a.key,sdkversion:i.sdkversion,logversion:i.logversion},method:"GET",header:{"content-type":"application/json"},success:function(o){var a,i;o.data.status&&"1"==o.data.status?(i=o.data.regeocode,i.addressComponent?a=i.addressComponent.adcode:i.aois&&i.aois.length>0&&(a=i.aois[0].adcode),e(a)):t.fail({errCode:o.data.infocode,errMsg:o.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var a=this,i=a.requestConfig;t.city?e(t.city):a.getWxLocation(t,function(t){o(t)})},a.prototype.getPoiAround=function(t){function e(e){var i={key:o.key,location:e,s:a.s,platform:a.platform,appname:o.key,sdkversion:a.sdkversion,logversion:a.logversion};t.querytypes&&(i["types"]=t.querytypes),t.querykeywords&&(i["keywords"]=t.querykeywords),wx.request({url:"https://restapi.amap.com/v3/place/around",data:i,method:"GET",header:{"content-type":"application/json"},success:function(e){var o,a,i,s;if(e.data.status&&"1"==e.data.status){if(e=e.data,e&&e.pois){for(o=[],a=0;a<e.pois.length;a++)i=0==a?t.iconPathSelected:t.iconPath,o.push({latitude:parseFloat(e.pois[a].location.split(",")[1]),longitude:parseFloat(e.pois[a].location.split(",")[0]),iconPath:i,width:22,height:32,id:a,name:e.pois[a].name,address:e.pois[a].address});s={markers:o,poisData:e.pois},t.success(s)}}else t.fail({errCode:e.data.infocode,errMsg:e.data.info})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})}var o=this,a=o.requestConfig;t.location?e(t.location):o.getWxLocation(t,function(t){e(t)})},a.prototype.getStaticmap=function(t){function e(e){i.push("location="+e),t.zoom&&i.push("zoom="+t.zoom),t.size&&i.push("size="+t.size),t.scale&&i.push("scale="+t.scale),t.markers&&i.push("markers="+t.markers),t.labels&&i.push("labels="+t.labels),t.paths&&i.push("paths="+t.paths),t.traffic&&i.push("traffic="+t.traffic);var o=s+i.join("&");t.success({url:o})}var o,a=this,i=[],s="https://restapi.amap.com/v3/staticmap?";i.push("key="+a.key),o=a.requestConfig,i.push("s="+o.s),i.push("platform="+o.platform),i.push("appname="+o.appname),i.push("sdkversion="+o.sdkversion),i.push("logversion="+o.logversion),t.location?e(t.location):a.getWxLocation(t,function(t){e(t)})},a.prototype.getInputtips=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.location&&(a["location"]=t.location),t.keywords&&(a["keywords"]=t.keywords),t.type&&(a["type"]=t.type),t.city&&(a["city"]=t.city),t.citylimit&&(a["citylimit"]=t.citylimit),wx.request({url:"https://restapi.amap.com/v3/assistant/inputtips",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.tips&&t.success({tips:e.data.tips})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},a.prototype.getDrivingRoute=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.origin&&(a["origin"]=t.origin),t.destination&&(a["destination"]=t.destination),t.strategy&&(a["strategy"]=t.strategy),t.waypoints&&(a["waypoints"]=t.waypoints),t.avoidpolygons&&(a["avoidpolygons"]=t.avoidpolygons),t.avoidroad&&(a["avoidroad"]=t.avoidroad),wx.request({url:"https://restapi.amap.com/v3/direction/driving",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths,taxi_cost:e.data.route.taxi_cost||""})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},a.prototype.getWalkingRoute=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.origin&&(a["origin"]=t.origin),t.destination&&(a["destination"]=t.destination),wx.request({url:"https://restapi.amap.com/v3/direction/walking",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.route&&t.success({paths:e.data.route.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},a.prototype.getTransitRoute=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.origin&&(a["origin"]=t.origin),t.destination&&(a["destination"]=t.destination),t.strategy&&(a["strategy"]=t.strategy),t.city&&(a["city"]=t.city),t.cityd&&(a["cityd"]=t.cityd),wx.request({url:"https://restapi.amap.com/v3/direction/transit/integrated",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){if(e&&e.data&&e.data.route){var o=e.data.route;t.success({distance:o.distance||"",taxi_cost:o.taxi_cost||"",transits:o.transits})}},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},a.prototype.getRidingRoute=function(t){var e=this,o=e.requestConfig,a={key:e.key,s:o.s,platform:o.platform,appname:e.key,sdkversion:o.sdkversion,logversion:o.logversion};t.origin&&(a["origin"]=t.origin),t.destination&&(a["destination"]=t.destination),wx.request({url:"https://restapi.amap.com/v4/direction/bicycling",data:a,method:"GET",header:{"content-type":"application/json"},success:function(e){e&&e.data&&e.data.data&&t.success({paths:e.data.data.paths})},fail:function(e){t.fail({errCode:"0",errMsg:e.errMsg||""})}})},t.exports.AMapWX=a},"68eb":function(t,e,o){"use strict";o("e66e");var a=s(o("b0ce")),i=s(o("21c9"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(i.default))},"8b15":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(o("448b")),i=o("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function n(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},a=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),a.forEach(function(e){r(t,e,o[e])})}return t}function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var c={data:function(){return{counts:-1,amapPlugin:null,key:"65bbf9c5a0ba3a024378876049a0fcc9",addressName:"",weather:{hasData:!1,data:[]},title:"map",latitude:22.604519815689297,longitude:114.05640721816943,scale:15,covers:[{latitude:22.604519815689297,longitude:114.05640721816944,iconPath:"../../static/didian.png",title:"阿打算",label:{content:"文本1",color:"#F76350",bgColor:"#fff",padding:5,borderRadius:4},callout:{content:"测试地点1",color:"#F76350",fontSize:12,borderRadius:5}},{latitude:22.60719815689275,longitude:114.05671721816975,iconPath:"../../static/didian.png",title:"阿迪达斯",x:1,y:2,label:{content:"文本1",color:"#F76350",bgColor:"#fff",padding:5,borderRadius:4},callout:{content:"测试地点2",color:"#F76350",fontSize:12}},{latitude:22.60419815689275,longitude:114.05601721816976,iconPath:"../../static/didian.png",title:"阿迪达斯",x:1,y:2,label:{content:"文本1",color:"#F76350",bgColor:"#fff",padding:5,borderRadius:4},callout:{content:"测试地点3",color:"#F76350",fontSize:12}}],controls:[{id:1,iconPath:"../../static/login_slices/zhifubao 33.png",position:{left:15,top:15,width:50,height:50}}],circles:[{latitude:39.9,longitude:116.39,fillColor:"#FFC41F",color:"#12A1DD",radius:500,strokeWidth:2}],polyline:[{points:[{latitude:39.909,longitude:116.39742},{latitude:39.9,longitude:116.39}],color:"#f00",width:4,dottedLine:!0,arrowLine:!0}]}},onLoad:function(){this.amapPlugin=new a.default.AMapWX({key:this.key}),this.getRegeo()},computed:n({},(0,i.mapState)(["token","id","type","username","theIndex"])),mounted:function(){},methods:n({},(0,i.mapMutations)(["theIndexStorage"]),{authorize:function(){},Drag:function(){},expand:function(t){this.counts==t?this.counts=-1:this.counts=t},markertap:function(t){this.counts=t.mp.markerId},regionchange:function(){var e=this;t.createMapContext("mymap").getCenterLocation({success:function(t){e.latitude!=t.latitude&&e.longitude!=t.longitude&&(e.latitude=t.latitude,e.longitude=t.longitude,e.getRegeo())}})},getRegeo:function(){var e=this;t.showLoading({title:"获取信息中"}),this.amapPlugin.getRegeo({success:function(o){console.log(o),e.addressName=o[0].name,t.hideLoading()},fail:function(t){console.log(111111),console.log(t)}}),this.amapPlugin.getPoiAround({location:this.latitude+","+this.longitude,success:function(t){console.log(t),e.covers=t.markers},fail:function(t){console.log(2222222),console.log(t)}})}})};e.default=c}).call(this,o("649d")["default"])},"9a79":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"near"},[o("view",{staticClass:"page-body"},[o("view",{staticClass:"page-section page-section-gap"},[o("map",{staticStyle:{width:"100%",height:"50%"},attrs:{latitude:t.latitude,longitude:t.longitude,markers:t.covers,id:"mymap","show-location":"true",eventid:"0df94596-0"},on:{touchend:t.regionchange,markertap:t.markertap}}),o("movable-area",{staticClass:"near-details",attrs:{mpcomid:"0df94596-1"}},[o("movable-view",{staticClass:"movable-details",attrs:{friction:"16",direction:"horizontal",eventid:"0df94596-2",mpcomid:"0df94596-0"},on:{change:t.Drag}},t._l(t.covers,function(e,a){return o("view",{key:e.name,staticClass:"details",class:{Drag:t.counts==a,correction:-1!=t.counts},attrs:{eventid:"0df94596-1-"+a},on:{click:function(e){t.expand(a)}}},[o("img",{attrs:{src:"",alt:""}}),o("span",[t._v(t._s(e.name))]),t.counts==a?o("view",[t._v("详细地址"),o("p",[t._v(t._s(t.covers[a].address))])],1):t._e(),o("text",{staticClass:"borrow"},[t._v("可借")]),o("text",{staticClass:"also"},[t._v("可还")])])}))],1)],1)])])},i=[];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return i})},b6ea:function(t,e,o){},c90f:function(t,e,o){"use strict";var a=o("b6ea"),i=o.n(a);i.a}},[["68eb","common/runtime","common/vendor"]]]);